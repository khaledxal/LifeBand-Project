<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeBand - Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ©</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± (Slider) */
        .hero-slider {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 25px;
            overflow: hidden;
            margin-top: 25px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }
        .slides {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 0.8s ease-in-out;
        }
        .slide {
            width: 33.33%;
            height: 100%;
            position: relative;
            background-size: cover;
            background-position: center;
        }
        .slide-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, rgba(0,0,0,0.7), transparent);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 50px;
            color: white;
        }
        [dir="ltr"] .slide-overlay {
            background: linear-gradient(to left, rgba(0,0,0,0.7), transparent);
        }
        .slide-overlay h2 { font-size: 2rem; margin-bottom: 15px; color: var(--accent); }
        .slide-overlay p { font-size: 1.1rem; max-width: 450px; margin-bottom: 20px; line-height: 1.6; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØ­Ø±Ùƒ (Ticker) */
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            padding: 10px 0;
            margin-bottom: 30px;
            border-radius: 15px;
        }
        @keyframes tickerAr { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        @keyframes tickerEn { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        
        .ticker { display: flex; white-space: nowrap; animation: tickerAr 30s linear infinite; }
        [dir="ltr"] .ticker { animation: tickerEn 30s linear infinite; }
        .ticker-item { padding: 0 40px; font-weight: bold; color: var(--primary); }

        .slider-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        .dot { width: 12px; height: 12px; background: rgba(255,255,255,0.5); border-radius: 50%; cursor: pointer; }
        .dot.active { background: var(--accent); width: 30px; border-radius: 10px; }
    </style>
</head>
<body class="page-fade">

    <div class="container" id="main-layout">
        
        <div class="hero-slider">
            <div class="slides" id="mainSlides">
                <div class="slide" style="background-image: url('https://images.pexels.com/photos/40568/medical-appointment-doctor-healthcare-40568.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <div class="slide-overlay">
                        <h2 data-i18n="slide1_h">Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ ÙŠØ¨Ø¯Ø£ Ù…Ù† ÙˆØ¹ÙŠÙƒ</h2>
                        <p data-i18n="slide1_p">Ø§ÙƒØªØ´Ù ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ø³ÙŠØ·Ø© ÙÙŠ Ù†Ù…Ø· Ø­ÙŠØ§ØªÙƒ Ø£Ù† ØªØ­Ù…ÙŠÙƒ Ù…Ù† Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø²Ù…Ù†Ø©.</p>
                        <a href="#tipsGrid" class="main-btn" style="width: fit-content; padding: 10px 30px; text-decoration: none;" data-i18n="slide_btn_browse">ØªØµÙØ­ Ø§Ù„Ù†ØµØ§Ø¦Ø­</a>
                    </div>
                </div>
                <div class="slide" style="background-image: url('https://images.pexels.com/photos/7088483/pexels-photo-7088483.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <div class="slide-overlay">
                        <h2 data-i18n="slide2_h">ØªÙ‚Ù†ÙŠØ© ØªØµÙ†Ø¹ Ø§Ù„ÙØ±Ù‚</h2>
                        <p data-i18n="slide2_p">Ø³ÙˆØ§Ø± LifeBand Ø±ÙÙŠÙ‚Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø¥Ù†Ù‚Ø§Ø°Ùƒ ÙÙŠ Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø©.</p>
                        <a href="register.html" class="main-btn" style="width: fit-content; padding: 10px 30px; background: var(--secondary); text-decoration: none;" data-i18n="slide_btn_reg">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</a>
                    </div>
                </div>
                <div class="slide" style="background-image: url('https://images.pexels.com/photos/3913025/pexels-photo-3913025.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <div class="slide-overlay">
                        <h2 data-i18n="slide3_h">Ù…Ø¬ØªÙ…Ø¹ ØµØ­ÙŠ Ù…ØªÙƒØ§Ù…Ù„</h2>
                        <p data-i18n="slide3_p">Ø§Ù†Ø¶Ù… Ù„Ø¨Ø±Ø§Ù…Ø¬Ù†Ø§ Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ© ÙˆØ³Ø§Ù‡Ù… ÙÙŠ Ù†Ø´Ø± Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„ØµØ­ÙŠ.</p>
                        <a href="volunteering.html" class="main-btn" style="width: fit-content; padding: 10px 30px; text-decoration: none;" data-i18n="slide_btn_vol">Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ·ÙˆØ¹</a>
                    </div>
                </div>
            </div>
            <div class="slider-dots" id="sliderDots"><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
        </div>

        <div class="ticker-wrap">
            <div class="ticker" id="tickerContent"></div>
        </div>

        <main>
            <div id="tipsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; padding-bottom: 50px;"></div>
        </main>
    </div>

    <script type="module">
        import { injectLayout } from './js/layout.js';
        import { auth } from './js/firebase-config.js';
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…ÙˆØ­Ø¯
        injectLayout();

        // 2. Ù…ØµÙÙˆÙØ© Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        const tips = [
            { ar: {t:"Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡", c:"8 Ø£ÙƒÙˆØ§Ø¨ ÙŠÙˆÙ…ÙŠØ§Ù‹ ØªØ­Ø³Ù† ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒÙ„Ù‰."}, en: {t:"Drink Water", c:"8 glasses a day improves kidney function."}, icon: "ğŸ’§", img: "https://images.pexels.com/photos/1452115/pexels-photo-1452115.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø¹Ù…ÙŠÙ‚", c:"7-8 Ø³Ø§Ø¹Ø§Øª ØªØ¹Ø²Ø² Ø§Ù„Ù…Ù†Ø§Ø¹Ø©."}, en: {t:"Deep Sleep", c:"7-8 hours boosts immunity."}, icon: "ğŸŒ™", img: "https://images.pexels.com/photos/3771069/pexels-photo-3771069.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"Ø§Ù„Ù…Ø´ÙŠ Ø§Ù„Ø³Ø±ÙŠØ¹", c:"30 Ø¯Ù‚ÙŠÙ‚Ø© ØªÙ‚Ù„Ù„ Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù‚Ù„Ø¨."}, en: {t:"Brisk Walk", c:"30 mins daily reduces heart risk."}, icon: "ğŸƒâ€â™‚ï¸", img: "https://images.pexels.com/photos/601177/pexels-photo-601177.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª", c:"Ø§Ù„Ø£Ù„ÙŠØ§Ù ØªØ¯Ø¹Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ."}, en: {t:"Vegetables", c:"Fiber supports the digestive system."}, icon: "ğŸ¥—", img: "https://images.pexels.com/photos/1143754/pexels-photo-1143754.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±", c:"ÙŠØ­Ù…ÙŠÙƒ Ù…Ù† Ø§Ù„Ø³ÙƒØ±ÙŠ ÙˆØ§Ù„Ø³Ù…Ù†Ø©."}, en: {t:"Reduce Sugar", c:"Protects from diabetes and obesity."}, icon: "ğŸš«", img: "https://images.pexels.com/photos/4113661/pexels-photo-4113661.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ†", c:"ÙŠÙ…Ù†Ø¹ Ø§Ù†ØªÙ‚Ø§Ù„ 80% Ù…Ù† Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø¹Ø¯ÙŠØ©."}, en: {t:"Hand Washing", c:"Prevents 80% of infectious diseases."}, icon: "ğŸ§¼", img: "https://images.pexels.com/photos/4210561/pexels-photo-4210561.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"ØµØ­Ø© Ø§Ù„Ø¹ÙŠÙ†", c:"Ù‚Ø§Ø¹Ø¯Ø© 20-20-20 ØªÙ‚Ù„Ù„ Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ø´Ø§Ø´Ø©."}, en: {t:"Eye Health", c:"The 20-20-20 rule reduces digital strain."}, icon: "ğŸ‘ï¸", img: "https://images.pexels.com/photos/3758105/pexels-photo-3758105.jpeg?auto=compress&cs=tinysrgb&w=400" },
            { ar: {t:"Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø§Ù„Ø£ÙˆÙ„ÙŠ", c:"ØªØ¹Ù„Ù… ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø­Ø±ÙˆÙ‚ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©."}, en: {t:"First Aid", c:"Learn how to treat minor burns correctly."}, icon: "ğŸ©¹", img: "https://images.pexels.com/photos/6520192/pexels-photo-6520192.jpeg?auto=compress&cs=tinysrgb&w=400" }
        ];

        const tickerItems = {
            ar: ["ğŸš¨ Ø­Ø¯Ø« Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ© Ø¯ÙˆØ±ÙŠØ§Ù‹.", "ğŸ’¡ Ø§Ù„Ù…Ø´ÙŠ ÙŠØ­Ø³Ù† Ù…Ø²Ø§Ø¬Ùƒ ÙÙˆØ±Ø§Ù‹.", "ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦: 911.", "ğŸ”’ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø´ÙØ±Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„."],
            en: ["ğŸš¨ Update your medical data.", "ğŸ’¡ Walking boosts your mood.", "ğŸ“ Emergency: 911.", "ğŸ”’ Data is fully encrypted."]
        };

        // 3. ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ØºØ© Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©
        function updatePageContent(lang) {
            const isAr = lang === 'ar';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙŠÙƒØ±
            const tickerHtml = tickerItems[lang].map(item => `<div class="ticker-item">${item}</div>`).join('');
            document.getElementById('tickerContent').innerHTML = tickerHtml + tickerHtml; // Ù…Ø¶Ø§Ø¹ÙØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ø­Ø±ÙƒØ© Ù…Ø³ØªÙ…Ø±Ø©

            // ØªØ­Ø¯ÙŠØ« ÙƒØ±ÙˆØª Ø§Ù„Ù†ØµØ§Ø¦Ø­
            document.getElementById('tipsGrid').innerHTML = tips.map(tip => `
                <div class="glass-card" style="padding: 0; overflow: hidden; transition: 0.4s;">
                    <img src="${tip.img}" style="width: 100%; height: 160px; object-fit: cover; opacity: 0.8;" alt="tip">
                    <div style="padding: 20px;">
                        <div style="font-size: 24px; margin-bottom: 5px;">${tip.icon}</div>
                        <h3 style="color: var(--primary); margin-bottom: 5px;">${tip[lang].t}</h3>
                        <p style="color: var(--text-main); font-size: 13px; opacity: 0.8; line-height: 1.5;">${tip[lang].c}</p>
                    </div>
                </div>
            `).join('');
        }

        // 4. Ù…Ù†Ø·Ù‚ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        let currentSlide = 0;
        const slides = document.getElementById('mainSlides');
        const dots = document.querySelectorAll('.dot');
        function moveSlide() {
            currentSlide = (currentSlide + 1) % 3;
            const factor = document.documentElement.dir === 'rtl' ? 33.33 : -33.33;
            slides.style.transform = `translateX(${currentSlide * factor}%)`;
            dots.forEach((dot, index) => dot.classList.toggle('active', index === currentSlide));
        }
        setInterval(moveSlide, 5000);

        // 5. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
        const currentLang = localStorage.getItem('preferred_lang') || 'ar';
        updatePageContent(currentLang);

        // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ù…Ù† Ø§Ù„Ù‡ÙŠØ¯Ø± (Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø²Ø± langBtn ÙÙŠ Ø§Ù„Ù€ Layout)
        document.addEventListener('click', (e) => {
            if (e.target.id === 'langBtn') {
                setTimeout(() => {
                    const newLang = localStorage.getItem('preferred_lang');
                    updatePageContent(newLang);
                }, 50);
            }
        });

        // Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
        onAuthStateChanged(auth, (user) => {
            const authZone = document.getElementById('auth-zone');
            const lang = localStorage.getItem('preferred_lang') || 'ar';
            if (user && authZone) {
                authZone.innerHTML = `<a href="profile.html?id=${user.uid}" class="nav-item">${lang==='ar'?'Ù…Ù„ÙÙŠ':'Profile'}</a>
                <button id="logoutBtn" class="nav-item" style="background:none; border:none; cursor:pointer; color: #ef4444;">${lang==='ar'?'Ø®Ø±ÙˆØ¬':'Logout'}</button>`;
                document.getElementById('logoutBtn').onclick = () => signOut(auth).then(() => window.location.reload());
            }
        });
    </script>
</body>
</html>